<!DOCTYPE html>
<html>
<head>
    <title>üêç‚úÇÔ∏è PastePy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <div class="navbar">
        <button form="save-form" type="submit"><i class="fas fa-save"></i></button>
        <form id="save-form" method="POST" action="/save">
            <select name="duration">
                {% for option, value in duration_options.items() %}
                    <option value="{{ value }}">{{ option }}</option>
                {% endfor %}
            </select>
            <input type="hidden" name="snippet" id="snippet-input">
        </form>
        <span class="navbar-title">üêç‚úÇÔ∏è Editor</span>
    </div>

    <textarea class="editor" id="snippet-textarea" rows="10" placeholder="Enter your snippet here..."></textarea>

    <div class="error-popup" id="error-popup" style="display: none;">
        <div class="error-popup-content">
            <i class="fas fa-times"></i>
            <p id="error-message"></p>
        </div>
    </div>

    <footer class="footer">
        <p>Built by Boketto &amp; TheMightyCta   |   AGPLv3 2023</p>
    </footer>

    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        document.getElementById("snippet-textarea").addEventListener("input", function() {
            document.getElementById("snippet-input").value = this.value;
        });

        document.getElementById("save-form").addEventListener("submit", async function(event) {
            const snippet = document.getElementById("snippet-textarea").value.trim();
            if (snippet === "") {
                event.preventDefault(); // Prevent form submission
                const errorMessage = "Snippet must contain some text!";
                showErrorPopup(errorMessage);
            }
        });

        function showErrorPopup(errorMessage) {
            const errorPopup = document.getElementById("error-popup");
            const errorMessageElement = document.getElementById("error-message");
            errorMessageElement.textContent = errorMessage;
            errorPopup.style.display = "flex";
            setTimeout(function() {
                errorPopup.style.display = "none";
            }, 2000);
        }
    </script>
</body>
</html>
